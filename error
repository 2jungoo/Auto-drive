python3 -c "
import cv2
import time
import numpy as np

# CSI 카메라 파이프라인
pipeline = 'nvarguscamerasrc ! video/x-raw(memory:NVMM), width=640, height=480, format=NV12, framerate=30/1 ! nvvidconv ! video/x-raw, format=BGRx ! videoconvert ! video/x-raw, format=BGR ! appsink'

print('CSI 카메라 테스트 시작...')
cap = cv2.VideoCapture(pipeline, cv2.CAP_GSTREAMER)

if cap.isOpened():
    print('✅ CSI 카메라 열기 성공')
    time.sleep(3)  # 초기화 시간
    
    for i in range(5):
        ret, frame = cap.read()
        if ret and frame is not None:
            print(f'프레임 {i+1}: 해상도={frame.shape}, 데이터 유효성={np.any(frame)}, min={frame.min()}, max={frame.max()}')
        else:
            print(f'프레임 {i+1}: 읽기 실패')
        time.sleep(1)
    
    cap.release()
    print('✅ CSI 카메라 테스트 완료')
else:
    print('❌ CSI 카메라 열기 실패')
"
